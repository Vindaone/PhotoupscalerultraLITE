<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Upscaler</title>
</head>
<body>
    <h1>Photo Upscaler</h1>
    <input type="file" id="fileInput" accept="image/*">
    <br><br>
    <label for="scale">Choose upscale factor (1x to 10x):</label>
    <select id="scale">
        <option value="1">1x</option>
        <option value="2">2x</option>
        <option value="3">3x</option>
        <option value="4">4x</option>
        <option value="5">5x</option>
        <option value="6">6x</option>
        <option value="7">7x</option>
        <option value="8">8x</option>
        <option value="9">9x</option>
        <option value="10">10x</option>
    </select>
    <br><br>
    <button id="upscaleButton">Upscale Image</button>
    <br><br>
    <div id="processingMessage" style="display: none;">Processing... Please wait.</div>
    <a id="downloadLink" style="display: none;">Download Upscaled Image</a>

    <script>
        const upscaleButton = document.getElementById('upscaleButton');
        const processingMessage = document.getElementById('processingMessage');
        const downloadLink = document.getElementById('downloadLink');

        upscaleButton.addEventListener('click', async () => {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            const scale = parseInt(document.getElementById('scale').value);
            
            if (!file) {
                alert("Please upload an image file.");
                return;
            }

            processingMessage.style.display = 'block'; // Show processing message

            // Read file as a data URL
            const reader = new FileReader();
            reader.onload = async (event) => {
                const imageDataUrl = event.target.result;

                // Call the DeepAI API for image upscaling
                try {
                    const response = await fetch("https://api.deepai.org/api/torch-srgan", {
                        method: "POST",
                        headers: {
                            "api-key": "952829cf-9e0b-4b86-a34d-2ceec1e247b4", // Your DeepAI API key
                        },
                        body: JSON.stringify({ image: imageDataUrl }),
                    });

                    const result = await response.json();
                    const upscaledImageUrl = result.output_url;

                    // Create a download link
                    downloadLink.href = upscaledImageUrl;
                    downloadLink.download = 'upscaled_image.png';
                    downloadLink.style.display = 'block';
                    downloadLink.textContent = 'Download Upscaled Image';
                } catch (error) {
                    console.error("Error during image processing:", error);
                } finally {
                    processingMessage.style.display = 'none'; // Hide processing message
                }
            };
            reader.readAsDataURL(file);
        });
    </script>
</body>
</html>
